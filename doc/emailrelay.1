.\" 
.\" Copyright (C) 2001-2002 Graeme Walker <graeme_walker@users.sourceforge.net>
.\" 
.\" This program is free software; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License
.\" as published by the Free Software Foundation; either
.\" version 2 of the License, or (at your option) any later
.\" version.
.\" 
.\" This program is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\" 
.\" You should have received a copy of the GNU General Public License
.\" along with this program; if not, write to the Free Software
.\" Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
.\" 
.TH EMAILRELAY 1 local
.SH NAME
emailrelay \- e-mail transfer agent
.SH SYNOPSIS
.B emailrelay
[OPTIONS]
.LP
.B emailrelay 
--as-server
.LP
.B emailrelay
--as-client 
.I server-address
.LP
.B emailrelay
--as-proxy 
.I server-address
.SH DESCRIPTION
.I emailrelay
is an simple e-mail message transfer agent. It does store-and-forward
mail relay to a fixed downstream server, without any routing. 
.LP
It runs in two main modes: a storage deamon 
.RI ( --as-server ) 
and a forwarding 
agent 
.RI ( --as-client ). 
The storage daemon is an SMTP server which stores e-mail 
messages in a local spool directory. The forwarding agent acts as an
SMTP client, which passes the spooled e-mail messages on to a downstrema
SMTP server.
.LP
It can also run in a third mode, as a proxy server
.RI ( --as-proxy ). 
In this mode all messages are forwarded immediately to the downstream
server.
.SH OPTIONS
.TP
.B \-a,--admin \fIadmin-port\fR
Enables the administration interface and specifies its listening port number.
.TP
.B \-q,--as-client \fIhost:port\fR
Equivalent to \fI--log\fR \fI--no-syslog\fR \fI--no-daemon\fR \fI--dont-serve\fR \fI--forward\fR \fI--forward-to\fR.
.TP
.B \-y,--as-proxy \fIhost:port\fR
Equivalent to \fI--log\fR \fI--close-stderr\fR \fI--immediate\fR \fI--forward-to\fR.
.TP
.B \-d,--as-server 
Equivalent to \fI--log\fR \fI--close-stderr\fR.
.TP
.B \-C,--client-auth \fIfile\fR
Enables authentication with remote server, using the given secrets file.
.TP
.B \-e,--close-stderr 
Closes the standard error stream after start-up.
.TP
.B \-U,--connection-timeout \fItime\fR
Sets the timeout (in seconds) when connecting to a remote server (default is 40).
.TP
.B \-D,--domain \fIfqdn\fR
Sets an override for the host's fully qualified domain name.
.TP
.B \-x,--dont-serve 
Stops the process acting as a server (usually used with \fI--forward\fR).
.TP
.B \-z,--filter \fIprogram\fR
Defines a mail pre-processor.
.TP
.B \-f,--forward 
Forwards stored mail on startup (requires \fI--forward-to\fR).
.TP
.B \-o,--forward-to \fIhost:port\fR
Specifies the remote smtp server (required by \fI--forward\fR and \fI--admin\fR).
.TP
.B \-h,--help 
Displays help text and exits.
.TP
.B \-m,--immediate 
Forwards each message as soon as it is received (requires \fI--forward-to\fR).
.TP
.B \-l,--log 
Writes log information on standard error (if open) and syslog (if not disabled).
.TP
.B \-L,--log-time 
Adds a timestamp to the logging output.
.TP
.B \-t,--no-daemon 
Does not detach from the terminal.
.TP
.B \-n,--no-syslog 
Disables syslog output.
.TP
.B \-i,--pid-file \fIpid-file\fR
Records the daemon process-id in the given file.
.TP
.B \-p,--port \fIport\fR
Specifies the smtp listening port number.
.TP
.B \-r,--remote-clients 
Allows remote clients to connect.
.TP
.B \-T,--response-timeout \fItime\fR
Sets the response timeout (in seconds) when talking to a remote server (default is 1800).
.TP
.B \-S,--server-auth \fIfile\fR
Enables authentication of remote clients, using the given secrets file.
.TP
.B \-s,--spool-dir \fIdir\fR
Specifies the spool directory (default is \fI/usr/local/var/spool/emailrelay\fR).
.TP
.B \-u,--user \fIusername\fR
Names the effective user to switch to when started as root (default is \fIdaemon\fR).
.TP
.B \-v,--verbose 
Generates more verbose logging (if compiled-in and logging enabled and stderr open).
.TP
.B \-V,--version 
Displays version information and exits.
.SH FILES
.IP \(bu 2
/usr/local/sbin/emailrelay
.IP \(bu 2
/usr/local/libexec/emailrelay-poke
.IP \(bu 2
/usr/local/libexec/emailrelay.sh
.IP \(bu 2
/usr/local/share/emailrelay/*.html
.IP \(bu 2
/usr/local/share/emailrelay/html/*.html
.IP \(bu 2
/usr/local/share/emailrelay/emailrelay-notify.sh
.IP \(bu 2
/usr/local/share/emailrelay/emailrelay-deliver.sh
.IP \(bu 2
/usr/local/share/emailrelay/emailrelay-filter.sh
.IP \(bu 2
/usr/local/man/man1/emailrelay.1
.IP \(bu 2
/usr/local/man/man1/emailrelay-poke.1
.IP \(bu 2
/usr/local/var/spool/emailrelay/emailrelay.*.envelope
.IP \(bu 2
/usr/local/var/spool/emailrelay/emailrelay.*.content
.SH SEE ALSO
E-MailRelay user guide
.br
E-MailRelay reference
.br
.BR syslog (3),
.BR pppd (8),
.BR init.d (7)
.SH AUTHOR
Graeme Walker, mailto:graeme_walker@users.sourceforge.net
