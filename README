E-MailRelay Readme
==================

Abstract
--------
E-MailRelay is a simple SMTP store-and-forward message transfer agent (MTA).
It runs as an SMTP server, storing e-mail in a local spool directory, and
then forwarding the stored messages to a downstream SMTP server on request. 
It can also run as a proxy server, forwarding (and optionally pre-processing)
e-mail as soon as it is received. It does not do any message routing, other
than to a local postmaster. Because of this functional simplicity it is 
extremely easy to configure, typically only requiring the address of the 
downstream SMTP server to be put on the command line.

C++ source code is available for Linux, FreeBSD and Windows. Distribution is
under the GNU General Public License.

Quick start
-----------
E-MailRelay can be built and installed from source using the ususal
"./configure ; make ; make install" incantation. The program runs as an SMTP 
server daemon using the "emailrelay --as-server" command, and stored mail is 
forwarded to a downstream server by running "emailrelay --as-client <isp-mail-server>:smtp". 

The "--as-server" command is typically run automatically at boot time, using
the boot scripts under "/etc/init.d" or "/sbin/init.d", while the "--as-client"
command is normally put into pppd's "ip-up" script ("/etc/ppp/ip-up") 
in place of "sendmail -q".

The program can also run as a proxy server ("--as-proxy") so that e-mail 
messages are forwarded immediately to a downstream server -- usually the local 
system's default MTA. This can be usefully combined with a mail pre-processor 
program by using the "--filter" switch.

The program requires a writeable spool directory to store e-mail messages.
The directory defaults to "/usr/local/var/spool/emailrelay", but it
can be changed by using the "--spool-dir" switch.

By default the server will try to listen on TCP port 25. If another SMTP
server is running then it will fail to start up, with a "cannot bind" error 
message. The port number can be changed by using the "--port" switch.

To test the program out without a full installation:
(1) run the server as "emailrelay --no-daemon --no-syslog --log --spool-dir ${HOME} --port 10025 &"
(2) reconfigure your e-mail client to use port 10025 rather than 25 ("smtp")
(3) send some test messages to addressees on the Internet
(4) connect to the Internet
(5) forward the stored messages using "emailrelay --spool-dir ${HOME} --as-client <your-isp-smtp-host>:smtp"
(6) clean up with "killall emailrelay ; rm ${HOME}/emailrelay.*"

Documentation
-------------
The following documentation is provided:
* README             -- this document
* COPYING            -- the GNU General Public License
* INSTALL            -- build & install instructions (based on generic GNU text)
* doc/userguide.txt  -- user guide
* doc/reference.txt  -- reference document
* doc/developer.txt  -- developer guide
* ChangeLog          -- change log for releases

And for completeness the following stub documents are also included:
* NEWS
* AUTHORS

Source code documentation can be generated by using doxygen (www.doxygen.org).

Configurations
--------------
The code was developed on SuSE Linux 7.1 using:
* linux 2.2.18,
* gcc 2.95.2,
* glibc 2.2.7 (libc.so.6),
* gnu make 3.79.1,
* autoconf 2.13

and ported to Windows 98 using
* MSVC 6.0

The code has also been built successfully on:
* Linux on Alpha hardware (Debian 2.2)
* Linux on Sparc hardware
* Linux on RS6000 PPC hardware
* FreeBSD on Intel hardware
* Solaris, using gcc, on Sparc hardware

(courtesy of SourceForge's compile farm).

