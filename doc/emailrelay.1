.\" 
.\" Copyright (C) 2001 Graeme Walker <graeme_walker@users.sourceforge.net>
.\" 
.\" This program is free software; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License
.\" as published by the Free Software Foundation; either
.\" version 2 of the License, or (at your option) any later
.\" version.
.\" 
.\" This program is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\" 
.\" You should have received a copy of the GNU General Public License
.\" along with this program; if not, write to the Free Software
.\" Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
.\" 
.TH EMAILRELAY 1 local
.SH NAME
emailrelay \- e-mail transfer agent
.SH SYNOPSIS
.B emailrelay
[OPTIONS]
.LP
.B emailrelay 
--as-server
.LP
.B emailrelay
--as-client 
.I server-address
.SH DESCRIPTION
.I emailrelay
is an simple e-mail message transfer agent. It is intended to be used
on stand-alone machines which have a dial-up connection to an ISP.
.LP
It runs in two modes: a storage deamon 
.RI ( --as-server ) 
and a forwarding 
agent 
.RI ( --as-client ). 
The storage daemon is an SMTP server which stores e-mail 
messages in a local spool directory. The forwarding agent acts as an
SMTP client, which passes the spooled e-mail messages on to an ISP's SMTP
server.
.SH OPTIONS
.TP
.B \-a,--admin \fIadmin-port\fR
Enables the administration interface and specifies its listening port number.
.TP
.B \-d,--as-server 
Equivalent to \fI--close-stderr\fR \fI--log\fR.
.TP
.B \-e,--close-stderr 
Closes the standard error stream when daemonising.
.TP
.B \-f,--forward 
Forwards stored mail on startup (requires \fI--forward-to\fR).
.TP
.B \-h,--help 
Displays help text and exits.
.TP
.B \-i,--pid-file \fIpid-file\fR
Records the daemon process-id in the given file.
.TP
.B \-l,--log 
Writes log information on standard error (if open) and syslog (if not disabled).
.TP
.B \-n,--no-syslog 
Disables syslog output.
.TP
.B \-o,--forward-to \fIhost:port\fR
Specifies the remote smtp server (required by \fI--forward\fR and \fI--admin\fR).
.TP
.B \-p,--port \fIport\fR
Specifies the smtp listening port number.
.TP
.B \-q,--as-client \fIhost:port\fR
Equivalent to \fI--no-syslog\fR \fI--no-daemon\fR \fI--log\fR \fI--dont-serve\fR \fI--forward\fR \fI--forward-to\fR.
.TP
.B \-r,--remote-clients 
Allows remote clients to connect.
.TP
.B \-s,--spool-dir \fIdir\fR
Specifies the spool directory (default is \fI/usr/local/var/spool/emailrelay\fR).
.TP
.B \-t,--no-daemon 
Does not detach from the terminal.
.TP
.B \-v,--verbose 
Generates more verbose logging (if compiled-in and logging enabled and stderr open).
.TP
.B \-x,--dont-serve 
Stops the process acting as a server (usually used with \fI--forward\fR).
.TP
.B \-V,--version 
Displays version information and exits.
.SH "DIAGNOSTICS"
If the 
.IR --log ,
.I --as-client 
or 
.I --as-server 
switches are in force then warning and error messages 
are sent to 
.I syslog 
(using the 
.BR LOG_MAIL 
facility) and to
.IR stderr .
Output to
.I syslog 
can be disabled with 
.IR --no-syslog ,
and output to stderr can be disabled in daemon mode with
.IR --close-stderr .
.PP
Failed e-mail messages are kept in the spool directory and given 
a
.I .bad
filename suffix. The failure reason is usually recorded within the
envelope file iteself.
.SH FILES
.IP \(bu 2
/usr/local/sbin/emailrelay
.IP \(bu 2
/usr/local/libexec/emailrelay-poke
.IP \(bu 2
/usr/local/libexec/emailrelay.sh
.IP \(bu 2
/usr/local/share/emailrelay/*.html
.IP \(bu 2
/usr/local/share/emailrelay/html/*.html
.IP \(bu 2
/usr/local/share/emailrelay/emailrelay-notify.sh
.IP \(bu 2
/usr/local/share/emailrelay/emailrelay-deliver.sh
.IP \(bu 2
/usr/local/man/man1/emailrelay.1
.IP \(bu 2
/usr/local/man/man1/emailrelay-poke.1
.IP \(bu 2
/usr/local/var/spool/emailrelay/emailrelay.*.envelope
.IP \(bu 2
/usr/local/var/spool/emailrelay/emailrelay.*.content
.SH SEE ALSO
E-MailRelay user guide
.br
E-MailRelay reference
.br
.BR syslog (3),
.BR pppd (8),
.BR init.d (7)
.BR emailrelay-poke (1),
.SH AUTHOR
Graeme Walker, mailto:graeme_walker@users.sourceforge.net
